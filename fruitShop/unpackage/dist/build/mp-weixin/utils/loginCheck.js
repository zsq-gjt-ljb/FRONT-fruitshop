"use strict";const e=require("../common/vendor.js"),o={checkLogin:(o={})=>{const n={showModal:!0,autoNavigate:!1,redirectUrl:"",...o};if(e.index.getStorageSync("token"))return!0;let t=n.redirectUrl;if(!t){const e=getCurrentPages(),o=e[e.length-1];t="/"+o.route}return n.showModal?e.index.showModal({title:"需要登录",content:"该功能需要登录后才能使用，是否前往登录？",success:o=>{o.confirm&&e.index.navigateTo({url:"/pages/login/login?redirect="+encodeURIComponent(t)})}}):n.autoNavigate&&e.index.navigateTo({url:"/pages/login/login?redirect="+encodeURIComponent(t)}),!1},logout:()=>{e.index.removeStorageSync("token"),e.index.setStorageSync("isGuestMode",!0),e.index.switchTab({url:"/pages/index/index"}),e.index.showToast({title:"已退出登录",icon:"success"})}};exports.loginCheck=o;
